<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<title>Bingo Hall</title>

<style>
body {
  background: #1e1e1e;
  color: white;
  font-family: Arial;
  text-align: center;
}

#number {
  font-size: 140px;
  margin: 40px;
  font-weight: bold;
}

.animate {
  animation: pop 0.6s ease;
}

@keyframes pop {
  0% { transform: scale(1); }
  50% { transform: scale(1.6); }
  100% { transform: scale(1); }
}

button, select, input {
  font-size: 22px;
  padding: 10px;
  margin: 8px;
}

#tickets {
  margin-top: 30px;
}

.ticket {
  background: #333;
  padding: 10px;
  margin: 10px;
  display: inline-block;
  border-radius: 12px;
}

.grid {
  display: grid;
  grid-template-columns: repeat(5, 50px);
  gap: 6px;
  justify-content: center;
}

.cell {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #ffffff;     /* κύκλος */
  color: #000000;          /* ⬅️ ΤΟ FIX */
  font-weight: bold;
  line-height: 50px;
  border: 2px solid #333;
  font-size: 18px;
}

.cell.mark {
  background: #4caf50;
  color: white;
}
</style>
</head>

<body>

<h1>BINGO HALL</h1>

<div id="number">--</div>

<select id="speed">
  <option value="5000">5 δευτ</option>
  <option value="3000">3 δευτ</option>
  <option value="1500">1.5 δευτ</option>
</select>

<br>
<button onclick="start()">START</button>

<h3>Δημιουργία Κουπονιού</h3>
<input id="player" placeholder="Όνομα παίκτη">
<button onclick="createTicket()">ΔΗΜΙΟΥΡΓΙΑ</button>

<div id="tickets"></div>

<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();

function start() {
  const speed = +document.getElementById("speed").value;
  socket.emit("start", speed);
}

socket.on("number", n => {
  const el = document.getElementById("number");
  el.textContent = n;
  el.classList.remove("animate");
  void el.offsetWidth;
  el.classList.add("animate");

  document.querySelectorAll(".cell").forEach(c => {
    if (+c.textContent === n) c.classList.add("mark");
  });
});

function createTicket() {
  const name = document.getElementById("player").value || "Παίκτης";

  const nums = Array.from({ length: 90 }, (_, i) => i + 1)
    .sort(() => Math.random() - 0.5)
    .slice(0, 25);

  const ticket = document.createElement("div");
  ticket.className = "ticket";
  ticket.innerHTML = `<h4>${name}</h4>`;

  const grid = document.createElement("div");
  grid.className = "grid";

  nums.forEach(n => {
    const c = document.createElement("div");
    c.className = "cell";
    c.textContent = n;
    grid.appendChild(c);
  });

  ticket.appendChild(grid);
  document.getElementById("tickets").appendChild(ticket);
}
</script>

</body>
</html>
